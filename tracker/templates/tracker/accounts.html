{% extends 'tracker/index.html' %}
{% load static %}

{% block header %}
		{% if customer %}
			<h1>Tracker &#8212; {{ customer.name }}</h1>
		{% else %}
			<h1>Tracker &#8212; Accounts</h1>
		{% endif %}
{% endblock header %}

{% block content %}

	{% if message %}
		{{ message }}
	{% endif %}

	<a href="/accounts?accts=all">All accounts</a> | <a href="/accounts?accts=active">Active
	accounts</a> | <a href="/accounts?accts=inactive">Inactive accounts</a> |
	<a href="/add_account">Add new account</a>
	{% if customer_list %}
		<br/><br/><table>
			<tr>
				{% for item in headers %}
					<th>{{ item }}</th>
				{% endfor %}
			</tr>
		{% for customer in customer_list %}
			<tr>
				<td id="account_cell"><a href="{{ customer.url }}">{{ customer.acct }}</a></td>
				<td id="name_cell">{{ customer.name }}</td>
				<td id="status_cell">{{ account_status }}</td>
				{% if account_status == 'Inactive' %}
					<td id="close_date">{{ customer.closedate }}</td>
				{% endif %}
			</tr>
		{% endfor %}
		</table>
	{% elif customer %}
		{% if account_status == 'Active' %}
			| <a href="/inventory?acct={{ customer.acct }}">Manage Inventory</a>
			| <a href="/accounts?remove={{ customer.acct }}">Remove account</a>
		{% endif %}
		<br/><br/>
		<table>
			<tr>
				{% for item in headers %}
					<th>{{ item }}</th>
				{% endfor item %}
			</tr>
			<tr>
				<td id="account_cell">{{ customer.acct }}</td>
				<td id="name_cell">{{ customer.name }}</td>
				<td id="email_cell">{{ customer.email }}</td>
				<td id="status_cell">{{ account_status }}</td>
				{% if account_status == 'Inactive' %}
					<td id="close_date">{{ customer.closedate }}</td>
				{% endif %}
			</tr>
		</table>
	{% else %}
		{{ error_message }}<br/>
	{% endif %}

	{% if inventory_list %}
		<h2>Inventory</h2>
		<table>
			<tr>
				{% for item in inv_headers %}
					<th>{{ item }}</th>
				{% endfor %}
			</tr>
			{% for item in inventory_list %}
				<tr>
					<td id="item_id">{{ item.itemid }}</td>
					<td id="item_quantity">{{ item.quantity }}</td>
					<td id="item_weight">{{ item.weight }}</td>
					<td id="item_storage_fees">{{ item.storage_fees }}</td>
					<td id="item_status">{{ item.status }}</td>
				</tr>
			{% endfor %}
		</table>
	{% else %}
		{{ error_message }}<br/>
	{% endif %}

{% endblock content %}
